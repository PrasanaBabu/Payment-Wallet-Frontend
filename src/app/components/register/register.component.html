<div *ngIf="errorMsg" class="alert alert-danger">
  <h1>{{ errorMsg }}</h1>
</div>

<style>
  .form-group {
    padding: 5px 10% 5px 10%;
  }
</style>

<p-toast></p-toast>
<div style="padding: 10% 10% 10% 10%" class="register-form">
  <form
    name="form"
    #f="ngForm"
    (ngSubmit)="f.form.valid && onSubmit()"
    novalidate
    [appMatchPassword]="['password', 'confirmPassword']"
  >
    <div class="form-group">
      <h2>Add New Wallet</h2>
      <div class="p-inputgroup">
        <span class="p-inputgroup-addon"><i class="pi pi-user"></i></span>

        <input
          pTooltip="Enter your username"
          tooltipPosition="top"
          tooltipEvent="focus"
          pInputText
          placeholder="User Name"
          type="text"
          class="form-control"
          name="userName"
          [(ngModel)]="form.username"
          required
          minlength="6"
          maxlength="20"
          #username="ngModel"
          [ngClass]="{ 'is-invalid': f.submitted && username.errors }"
        />
      </div>
      <div *ngIf="f.submitted && username.errors" class="invalid-feedback">
        <div *ngIf="username.errors['required']">User Name is required</div>
        <div *ngIf="username.errors['minlength']">
          User Name must be atleast 6 letters
        </div>
        <div *ngIf="username.errors['maxlength']">
          User Name cannot be more than 20 characters
        </div>
      </div>
    </div>
    <div class="form-group">
      <div class="p-inputgroup">
        <span class="p-inputgroup-addon"><i class="pi pi-user"></i></span>

        <input
          pInputText
          pTooltip="Enter your user ID"
          tooltipPosition="top"
          tooltipEvent="focus"
          placeholder="User ID "
          type="text"
          class="form-control"
          name="id"
          [(ngModel)]="form.id"
          required
          minlength="3"
          maxlength="5"
          #id="ngModel"
          [ngClass]="{ 'is-invalid': f.submitted && id.errors }"
        />
      </div>
      <div *ngIf="f.submitted && id.errors" class="invalid-feedback">
        <div *ngIf="id.errors['required']">ID is required</div>
        <div *ngIf="id.errors['minlength']">ID must be atleast 3 letters</div>
        <div *ngIf="username.errors['maxlength']">
          ID cannot be more than 5 characters
        </div>
      </div>
    </div>
    <div class="form-group">
      <div class="p-inputgroup">
        <span class="p-inputgroup-addon"><i class="pi pi-lock"></i></span>

        <input
          pInputText
          pTooltip="Enter your password"
          tooltipPosition="top"
          tooltipEvent="focus"
          placeholder="Password"
          type="password"
          name="password"
          [(ngModel)]="form.password"
          required
          minlength="8"
          maxlength="25"
          #password="ngModel"
          [ngClass]="{ 'is-invalid': f.submitted && password.errors }"
        />
      </div>

      <div *ngIf="f.submitted && password.errors" class="invalid-feedback">
        <div *ngIf="password.errors['required']">Password is required</div>
        <div *ngIf="password.errors['minlength']">
          Password must be atleast 8 letters
        </div>
        <div *ngIf="password.errors['maxlength']">
          Password cannot be more than 25 characters
        </div>
      </div>
    </div>
    <div class="form-group">
      <div class="p-inputgroup">
        <span class="p-inputgroup-addon"><i class="pi pi-lock"></i></span>

        <input
          pTooltip="Re Enter your password"
          tooltipPosition="top"
          tooltipEvent="focus"
          pInputText
          placeholder="Confirm Password"
          type="password"
          name="confirmPassword"
          class="form-control"
          [(ngModel)]="form.confirmPassword"
          required
          minlength="8"
          maxlength="25"
          #confirmPassword="ngModel"
          [ngClass]="{ 'is-invalid': f.submitted && confirmPassword.errors }"
        />
      </div>
      <div
        *ngIf="f.submitted && confirmPassword.errors"
        class="invalid-feedback"
      >
        <div *ngIf="confirmPassword.errors['required']">
          Confirm Password is required
        </div>
        <div *ngIf="confirmPassword.errors['minlength']">
          Confirm Password must be atleast 8 letters
        </div>
        <div *ngIf="confirmPassword.errors['maxlength']">
          Confirm Password cannot be more than 25 characters
        </div>
        <div *ngIf="confirmPassword.errors['matching']">
          Confirm Password must be same as password
        </div>
      </div>
      <p>
        If you already have an account, login using your credentials by clicking
        the sign in button.
      </p>
    </div>
    <div class="form-group">
      <button type="submit" class="btn btn-primary" style="margin-right: 10px">
        Register
      </button>
      <button
        type="button"
        (click)="redirectToSignIn()"
        class="btn btn-success"
      >
        Sign In
      </button>
    </div>
  </form>
</div>
